var onnxTest=function(e,t){"use strict";function n(e,t,n,o){return new(n||(n=Promise))((function(r,i){function c(e){try{a(o.next(e))}catch(e){i(e)}}function s(e){try{a(o.throw(e))}catch(e){i(e)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,s)}a((o=o.apply(e,t||[])).next())}))}class o{get runtime(){return function(e,t=100){return n(this,void 0,void 0,(function*(){let n;for(;!e.ready;)yield new Promise((e=>{clearTimeout(n),n=setTimeout(e,t)}));clearTimeout(n)}))}(this).then((()=>this.onnx))}get globalOnnx(){return window.ort}constructor(){this.ready=!1;this.globalOnnx?this.resolve():((e,t,n)=>{const o=document.createElement("script");o.onload=t,o.onerror=null!=n?n:()=>{throw new Error(`Error loading endpoint: ${e}`)},o.src=e,o.async=!0,document.body.appendChild(o)})(o.FromCDN,this.resolve.bind(this))}resolve(){this.ready=!0,this.onnx=this.globalOnnx}}o.FromCDN="https://cdn.jsdelivr.net/npm/onnxruntime-web/dist/ort.min.js";var r=(()=>{let e,r,i=[function(e,t){}],c=[];var s,a,l;return r=class extends t.Extension{constructor(e){super(e,"Onnx Example","onnxTest","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH0AAAB8CAYAAABE3L+AAAAACXBIWXMAAAsTAAALEwEAmpwYAAADQElEQVR4nO3dMWsUQRyG8edyZyEqqBgVJHiaUvA76CcQK3sbsbJVv0AquxSKjaWlpBS0thDBwkpFLTQgQRQtTIxnsVdJsnO3c//du3nfH1x1Ozube8JuYLJ7vdFohGlZ6voArH2OLsjRBTm6IEcXNKh7893HD+vARWC7ncOxTAeB+6tnh4/qNqqNDlwFTs/skKwNL4Ha6KnT+6fZHYu1ZCu1ga/pghxdkKMLcnRBji7I0QU5uiBHF+ToghxdkKMLcnRBqVW2HLvAZuD+SzUATkVPEGUTGFLFt8mdB95GThAZ/S/wJ3D/pfoRPUHkNX0J6Afuv1RHoifwH3KCHF2QowtydEGOLsjRBTm6IEcX5OiCHF2QowuKjL6DV9iaeB89QeQq21HgJtVqm01uOXqC6Ojrgfu3hnxNF+ToghxdkKMLcnRBji7I0QU5uiBHF+ToghxdkKMLcvTyJJs6enmS98JFLq1uAdfxenqbBsCbSTaK8hN4Erh/ayjy9D7AtyrPJV/TBTm6IEcX5OiCHF2QowtydEGOLsjRBTm6IEcX5OiCIlfZcq0AJzua+zt5T2I+Bxyf0bFM6wvwuW6DeY5+B7jR0dzPgcsZ4+8BV2ZzKFNbA27XbTDPp/cun2KRO3eXjzxP/tPKPEff6XDu35njt2dyFM0kP7d5jm5BHF2QowtydEGOLsjRBTm6IEcX5OiCHF2Qowty9L0dyxx/eCZH0UzyG5nneWk110OqteUmv9g94G7N+yPgwPj1/6rWEtXtwq/H+2lTH3ia2qjk6LeAXw3HXgKeZcx9DXicMT5Uyaf31Yyxuaf3Q5njQ5Ucve1T68IoObrtw9EFObogRxfk6IIcXZCjC3J0QY4uyNEFlRw959ak3NuSurwlK8nR95Ybvct72ZJKXlrdoHoS9bQPJd4FTmTOvUa1tNv259sDHoxf+yo5+oUO5x6OX11I/twln95VfUtt4OiCHF2QowtydEGOLsjRBTm6IEcX5OiCHF2QowtKRV/J2PeZjLEAy5njVSWfPp1aZdugWrWZ9puRe8BXqlt6m3pB9QjtLh8MvGj6wKvURr3RKKeLLSJf0wU5uiBHF+ToghxdkKMLcnRB/wBIt0+4Irv7NwAAAABJRU5ErkJggg==")}init(e){return n(this,void 0,void 0,(function*(){this.onnx=yield(new o).runtime}))}defineBlocks(){return{test:{type:t.BlockType.Command,text:"eee",operation:()=>n(this,void 0,void 0,(function*(){try{const{InferenceSession:e,Tensor:t}=this.onnx,n=yield e.create(`${location.href}/static/model.onnx`),o=Float32Array.from([1,2,3,4,5,6,7,8,9,10,11,12]),r=Float32Array.from([10,20,30,40,50,60,70,80,90,100,110,120]),i=new t("float32",o,[3,4]),c={a:i,b:new t("float32",r,[4,3])},s=(yield n.run(c)).c.data;console.log(s)}catch(e){console.error(`failed to inference ONNX model: ${e}.`)}}))}}}},s=r,"symbol"==typeof(a="ExtensionNameGoesHere")&&(a=a.description?"[".concat(a.description,"]"):""),Object.defineProperty(s,"name",{configurable:!0,value:l?"".concat(l," ",a):a}),function(e,t,n,o,r,i){function c(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var s,a=o.kind,l="getter"===a?"get":"setter"===a?"set":"value",u=!t&&e?o.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,o.name):{}),f=!1,y=n.length-1;y>=0;y--){var h={};for(var A in o)h[A]="access"===A?{}:o[A];for(var A in o.access)h.access[A]=o.access[A];h.addInitializer=function(e){if(f)throw new TypeError("Cannot add initializers after decoration has completed");i.push(c(e||null))};var w=(0,n[y])("accessor"===a?{get:d.get,set:d.set}:d[l],h);if("accessor"===a){if(void 0===w)continue;if(null===w||"object"!=typeof w)throw new TypeError("Object expected");(s=c(w.get))&&(d.get=s),(s=c(w.set))&&(d.set=s),(s=c(w.init))&&r.push(s)}else(s=c(w))&&("field"===a?r.push(s):d[l]=s)}u&&Object.defineProperty(u,o.name,d),f=!0}(null,e={value:r},i,{kind:"class",name:r.name},null,c),r=e.value,function(e,t,n){for(var o=arguments.length>2,r=0;r<t.length;r++)n=o?t[r].call(e,n):t[r].call(e)}(r,c),r})();return e.Extension=r,Object.defineProperty(e,"__esModule",{value:!0}),e}({},ExtensionFramework);//# sourceMappingURL=onnxTest.js.map
