var objectDetection=function(e,t){"use strict";function n(e,t,n,o,i,c){function s(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var r,a=o.kind,l="getter"===a?"get":"setter"===a?"set":"value",u=!t&&e?o.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,o.name):{}),p=!1,h=n.length-1;h>=0;h--){var f={};for(var v in o)f[v]="access"===v?{}:o[v];for(var v in o.access)f.access[v]=o.access[v];f.addInitializer=function(e){if(p)throw new TypeError("Cannot add initializers after decoration has completed");c.push(s(e||null))};var g=(0,n[h])("accessor"===a?{get:d.get,set:d.set}:d[l],f);if("accessor"===a){if(void 0===g)continue;if(null===g||"object"!=typeof g)throw new TypeError("Object expected");(r=s(g.get))&&(d.get=r),(r=s(g.set))&&(d.set=r),(r=s(g.init))&&i.push(r)}else(r=s(g))&&("field"===a?i.push(r):d[l]=r)}u&&Object.defineProperty(u,o.name,d),p=!0}function o(e,t,n,o){return new(n||(n=Promise))((function(i,c){function s(e){try{a(o.next(e))}catch(e){c(e)}}function r(e){try{a(o.throw(e))}catch(e){c(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}a((o=o.apply(e,t||[])).next())}))}const i={name:"Object Detection",description:"Detects and identifies the object shown!",iconURL:"Typescript_logo.png",insetIconURL:"typescript-logo.svg"};var c=(()=>{var e;let c,s,r=[];return e=class extends(t.extension(i,"video","toggleVideoBlock","setTransparencyBlock")){constructor(){super(...arguments),this.objectDetector=void function(e,t,n){for(var o=arguments.length>2,i=0;i<t.length;i++)n=o?t[i].call(e,n):t[i].call(e)}(this,r)}init(e){this.runningMode="IMAGE",this.continuous=!1,this.initializeObjectDetector()}initializeObjectDetector(){return o(this,void 0,void 0,(function*(){const e=yield import("https://cdn.skypack.dev/@mediapipe/tasks-vision@0.1.0-alpha-11"),t=e.ObjectDetector,{ObjectDectector:n,FilesetResolver:o}=e,i=yield o.forVisionTasks("https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.1.0-alpha-11/wasm");this.detector=yield t.createFromOptions(i,{baseOptions:{modelAssetPath:"https://storage.googleapis.com/mediapipe-tasks/object_detector/efficientdet_lite0_uint8.tflite"},scoreThreshold:.5,runningMode:this.runningMode})}))}detectionLoop(){return o(this,void 0,void 0,(function*(){for(;this.continuous;){this.getVideoFrame("image");const e=+new Date,t=(+new Date-e)/4;yield new Promise((e=>setTimeout(e,t)))}}))}detectObject(){console.log("pass")}continuouslyDetectObjects(e){return o(this,void 0,void 0,(function*(){this.continuous=e,this.detectionLoop()}))}},c=[t.block({type:t.BlockType.Command,text:"Detect objects"})],s=[t.block({type:t.BlockType.Command,text:e=>`Toggle continuous detection ${e}`,arg:{type:t.ArgumentType.Boolean,options:[{text:"on",value:!0},{text:"off",value:!1}]}})],n(e,null,c,{kind:"method",name:"detectObject",static:!1,private:!1,access:{has:e=>"detectObject"in e,get:e=>e.detectObject}},null,r),n(e,null,s,{kind:"method",name:"continuouslyDetectObjects",static:!1,private:!1,access:{has:e=>"continuouslyDetectObjects"in e,get:e=>e.continuouslyDetectObjects}},null,r),e})();return e.Extension=c,Object.defineProperty(e,"__esModule",{value:!0}),e}({},ExtensionFramework);//# sourceMappingURL=objectDetection.js.map
