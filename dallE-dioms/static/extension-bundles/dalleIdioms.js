var dalleIdioms=function(t,e){"use strict";function n(){}function o(t){return t()}function i(){return Object.create(null)}function r(t){t.forEach(o)}function s(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let c,l;function d(t,e){return c||(c=document.createElement("a")),c.href=e,t===c.href}function u(t,e){t.appendChild(e)}function p(t,e,n){const o=function(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;if(e&&e.host)return e;return t.ownerDocument}(t);if(!o.getElementById(e)){const t=y("style");t.id=e,t.textContent=n,function(t,e){u(t.head||t,e),e.sheet}(o,t)}}function f(t,e,n){t.insertBefore(e,n||null)}function m(t){t.parentNode&&t.parentNode.removeChild(t)}function y(t){return document.createElement(t)}function h(t){return document.createTextNode(t)}function g(){return h(" ")}function A(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function x(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function b(t,e){t.value=null==e?"":e}function v(t,e,n){t.classList[n?"add":"remove"](e)}function w(t){l=t}const $=[],I=[],k=[],E=[],B=Promise.resolve();let _=!1;function K(t){k.push(t)}const T=new Set;let O=0;function j(){const t=l;do{for(;O<$.length;){const t=$[O];O++,w(t),H(t.$$)}for(w(null),$.length=0,O=0;I.length;)I.pop()();for(let t=0;t<k.length;t+=1){const e=k[t];T.has(e)||(T.add(e),e())}k.length=0}while($.length);for(;E.length;)E.pop()();_=!1,T.clear(),w(t)}function H(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(K)}}const P=new Set;function R(t,e){-1===t.$$.dirty[0]&&($.push(t),_||(_=!0,B.then(j)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function L(t,e,a,c,d,u,p,f=[-1]){const y=l;w(t);const h=t.$$={fragment:null,ctx:[],props:u,update:n,not_equal:d,bound:i(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(y?y.$$.context:[])),callbacks:i(),dirty:f,skip_bound:!1,root:e.target||y.$$.root};p&&p(h.root);let g=!1;if(h.ctx=a?a(t,e.props||{},((e,n,...o)=>{const i=o.length?o[0]:n;return h.ctx&&d(h.ctx[e],h.ctx[e]=i)&&(!h.skip_bound&&h.bound[e]&&h.bound[e](i),g&&R(t,e)),n})):[],h.update(),g=!0,r(h.before_update),h.fragment=!!c&&c(h.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);h.fragment&&h.fragment.l(t),t.forEach(m)}else h.fragment&&h.fragment.c();e.intro&&((A=t.$$.fragment)&&A.i&&(P.delete(A),A.i(x))),function(t,e,n,i){const{fragment:a,after_update:c}=t.$$;a&&a.m(e,n),i||K((()=>{const e=t.$$.on_mount.map(o).filter(s);t.$$.on_destroy?t.$$.on_destroy.push(...e):r(e),t.$$.on_mount=[]})),c.forEach(K)}(t,e.target,e.anchor,e.customElement),j()}var A,x;w(y)}class U{$destroy(){!function(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=n}$on(t,e){if(!s(e))return n;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(e),()=>{const t=o.indexOf(e);-1!==t&&o.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function F(t){p(t,"svelte-a3yn7d",".form-control.svelte-a3yn7d{margin:.5rem 0;text-align:left}.input.svelte-a3yn7d{width:100%;display:block;padding:0.5rem 0.5rem;margin-top:0.5rem;border-width:1px;border-radius:0.25rem}.container.svelte-a3yn7d{width:400px;padding:10px;background-color:white}.form.svelte-a3yn7d{margin-bottom:30px}button.svelte-a3yn7d{outline:none;border:none;padding:10px;transition:background-color 0.5s ease}button.svelte-a3yn7d:disabled{background-color:grey}button.svelte-a3yn7d:hover{background-color:rgb(57, 57, 177)}")}function C(t){let o,i,s,a,c,l,d,p,w,$,I,k,E,B,_;return{c(){var n,r,u,f;o=y("div"),i=y("p"),s=y("label"),s.textContent="OpenAI API Key:",a=g(),c=y("input"),l=g(),d=y("center"),p=y("div"),w=y("button"),$=h("Submit"),k=g(),E=y("div"),E.innerHTML='<div><em><strong>Don&#39;t have an OpenAI API?</strong></em></div> \n    <div>Head <a href="https://beta.openai.com/account/api-keys">here</a> to either login or register, and then create an API key.</div>',x(s,"class","label"),x(s,"for","keyInput"),x(c,"id","keyInput"),x(c,"class","input svelte-a3yn7d"),x(i,"class","form-control svelte-a3yn7d"),w.disabled=I=!t[2],x(w,"class","svelte-a3yn7d"),n=w,r="background-color",null===(u=e.color.ui.primary)?n.style.removeProperty(r):n.style.setProperty(r,u,f?"important":""),x(d,"class","svelte-a3yn7d"),v(d,"form",Q),x(o,"class","svelte-a3yn7d"),v(o,"container",D)},m(e,n){f(e,o,n),u(o,i),u(i,s),u(i,a),u(i,c),b(c,t[2]),u(o,l),u(o,d),u(d,p),u(p,w),u(w,$),u(o,k),u(o,E),B||(_=[A(c,"input",t[3]),A(w,"click",t[4])],B=!0)},p(t,[e]){4&e&&c.value!==t[2]&&b(c,t[2]),4&e&&I!==(I=!t[2])&&(w.disabled=I)},i:n,o:n,d(t){t&&m(o),B=!1,r(_)}}}const D=!0,Q=!0;function N(t,e,n){let{extension:o}=e,{close:i}=e,r=o.apiKey;return t.$$set=t=>{"extension"in t&&n(0,o=t.extension),"close"in t&&n(1,i=t.close)},[o,i,r,function(){r=this.value,n(2,r)},()=>{n(0,o.apiKey=r,o),i()}]}function J(t){let e;return{c(){e=h("No source!")},m(t,n){f(t,e,n)},p:n,d(t){t&&m(e)}}}function X(t){let e,n,o;return{c(){e=y("img"),d(e.src,n=t[0].toDisplay.url)||x(e,"src",n),x(e,"alt",o=t[0].toDisplay.alt)},m(t,n){f(t,e,n)},p(t,i){1&i&&!d(e.src,n=t[0].toDisplay.url)&&x(e,"src",n),1&i&&o!==(o=t[0].toDisplay.alt)&&x(e,"alt",o)},d(t){t&&m(e)}}}function S(t){let e;function o(t,e){return t[0].toDisplay?X:J}let i=o(t),r=i(t);return{c(){e=y("div"),r.c()},m(t,n){f(t,e,n),r.m(e,null)},p(t,[n]){i===(i=o(t))&&r?r.p(t,n):(r.d(1),r=i(t),r&&(r.c(),r.m(e,null)))},i:n,o:n,d(t){t&&m(e),r.d()}}}function q(t,e,n){let{extension:o}=e,{close:i}=e;return t.$$set=t=>{"extension"in t&&n(0,o=t.extension),"close"in t&&n(1,i=t.close)},[o,i]}class Z extends e.Extension{internal_getCodeGenArgs(){return{id:"dalleIdioms",name:"DallE-dioms",blockIconURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH0AAAB8CAYAAABE3L+AAAAACXBIWXMAAAsTAAALEwEAmpwYAAADQElEQVR4nO3dMWsUQRyG8edyZyEqqBgVJHiaUvA76CcQK3sbsbJVv0AquxSKjaWlpBS0thDBwkpFLTQgQRQtTIxnsVdJsnO3c//du3nfH1x1Ozube8JuYLJ7vdFohGlZ6voArH2OLsjRBTm6IEcXNKh7893HD+vARWC7ncOxTAeB+6tnh4/qNqqNDlwFTs/skKwNL4Ha6KnT+6fZHYu1ZCu1ga/pghxdkKMLcnRBji7I0QU5uiBHF+ToghxdkKMLcnRBqVW2HLvAZuD+SzUATkVPEGUTGFLFt8mdB95GThAZ/S/wJ3D/pfoRPUHkNX0J6Afuv1RHoifwH3KCHF2QowtydEGOLsjRBTm6IEcX5OiCHF2QowuKjL6DV9iaeB89QeQq21HgJtVqm01uOXqC6Ojrgfu3hnxNF+ToghxdkKMLcnRBji7I0QU5uiBHF+ToghxdkKMLcvTyJJs6enmS98JFLq1uAdfxenqbBsCbSTaK8hN4Erh/ayjy9D7AtyrPJV/TBTm6IEcX5OiCHF2QowtydEGOLsjRBTm6IEcX5OiCIlfZcq0AJzua+zt5T2I+Bxyf0bFM6wvwuW6DeY5+B7jR0dzPgcsZ4+8BV2ZzKFNbA27XbTDPp/cun2KRO3eXjzxP/tPKPEff6XDu35njt2dyFM0kP7d5jm5BHF2QowtydEGOLsjRBTm6IEcX5OiCHF2Qowty9L0dyxx/eCZH0UzyG5nneWk110OqteUmv9g94G7N+yPgwPj1/6rWEtXtwq/H+2lTH3ia2qjk6LeAXw3HXgKeZcx9DXicMT5Uyaf31Yyxuaf3Q5njQ5Ucve1T68IoObrtw9EFObogRxfk6IIcXZCjC3J0QY4uyNEFlRw959ak3NuSurwlK8nR95Ybvct72ZJKXlrdoHoS9bQPJd4FTmTOvUa1tNv259sDHoxf+yo5+oUO5x6OX11I/twln95VfUtt4OiCHF2QowtydEGOLsjRBTm6IEcX5OiCHF2QowtKRV/J2PeZjLEAy5njVSWfPp1aZdugWrWZ9puRe8BXqlt6m3pB9QjtLh8MvGj6wKvURr3RKKeLLSJf0wU5uiBHF+ToghxdkKMLcnRB/wBIt0+4Irv7NwAAAABJRU5ErkJggg=="}}constructor(...t){super(...t),Z.prototype.__init.call(this),Z.prototype.__init2.call(this),Z.prototype.__init3.call(this),Z.prototype.__init4.call(this)}__init(){this.idioms=["a bitter pill to swallow"]}__init2(){this.definitionsByIdiom={"a bitter pill to swallow":"Still waiting to dowload idioms"}}__init3(){this.apiKey=""}__init4(){this.idiomsArg={type:e.ArgumentType.String,options:()=>this.idioms}}init(t){this.getIdioms()}async getIdioms(){const t=await fetch("https://www.wikitable2json.com/api/English-language_idioms");if(!t.ok)throw new Error("Failed to retrieve idiom data");const e=await t.json();if(!Array.isArray(e)||1!==e.length)throw new Error("Unexpected format!");const n=e[0];if("Idiom"!==n[0][0])throw new Error("Unexpected format!");const o=n.slice(1);this.idioms=o.map((([t])=>t)),this.definitionsByIdiom=o.reduce(((t,[e,n])=>(t[e]=n,t)),{}),this.openUI("APIKey")}defineBlocks(){return{setAPIKey:{type:e.BlockType.Button,text:"Set API Key",operation:()=>this.openUI("APIKey","Enter your API Key")},defineIdiom:{type:e.BlockType.Reporter,text:t=>`Define ${t}`,operation:t=>this.definitionsByIdiom[t],arg:this.idiomsArg},generateImage:{type:e.BlockType.Command,arg:this.idiomsArg,text:t=>`What does ${t} look like?`,operation:async t=>{const{apiKey:e}=this;if(!e||""===e||"undefined"===e)return void this.openUI("APIKey","Set your API Key and then try again");const n=await(async({apiKey:t,prompt:e,size:n})=>{var o="Bearer "+t;const i=await fetch("https://api.openai.com/v1/images/generations",{method:"POST",headers:{Authorization:o,"Content-Type":"application/json"},body:JSON.stringify({prompt:e,n:1,size:`${n}x${n}`})}),r=await i.json(),{data:s}=r;return s[0].url})({apiKey:e,prompt:t,size:512});this.toDisplay={url:n,alt:`Generated image of ${t}`},this.openUI("UI",t)}}}}}return t.APIKey=class extends U{constructor(t){super(),L(this,t,N,C,a,{extension:0,close:1},F)}},t.Extension=Z,t.UI=class extends U{constructor(t){super(),L(this,t,q,S,a,{extension:0,close:1})}},Object.defineProperty(t,"__esModule",{value:!0}),t}({},ExtensionFramework);//# sourceMappingURL=dalleIdioms.js.map
